name: Tests
on: [push]
jobs:
  appleclang-macos-11-cpp17:
    name: "AppleClang 13.0 (MacOS 11, C++17)"
    runs-on: macos-11
    steps:
      - uses: actions/checkout@v2
      - run: c++ -v
      - run: make CXX_STANDARD=17
  appleclang-macos-11-cpp20:
    name: "AppleClang 13.0 (MacOS 11, C++20)"
    runs-on: macos-11
    steps:
      - uses: actions/checkout@v2
      - run: c++ -v
      - run: make CXX_STANDARD=20
  appleclang-macos-1015-cpp17:
    name: "AppleClang 12.0 (MacOS 10.15, C++17)"
    runs-on: macos-10.15
    steps:
      - uses: actions/checkout@v2
      - run: c++ -v
      - run: make CXX_STANDARD=17
  appleclang-macos-1015-cpp20:
    name: "AppleClang 12.0 (MacOS 10.15, C++20)"
    runs-on: macos-10.15
    steps:
      - uses: actions/checkout@v2
      - run: c++ -v
      - run: make CXX_STANDARD=2a
  gcc-ubuntu-2004-cpp17:
    name: "GCC 9.3 (Ubuntu 20.04, C++17)"
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
      - run: c++ -v
      - run: make CXX_STANDARD=17 CXXFLAGS=-DCTRE_ENABLE_LITERALS PEDANTIC=""
  gcc-ubuntu-2004-cpp20:
    name: "GCC 9.3 (Ubuntu 20.04, C++20)"
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
      - run: c++ -v
      - run: make CXX_STANDARD=2a
  clang-ubuntu-2004-cpp20:
    name: "Clang 9.0 (Ubuntu 20.04, C++20)"
    runs-on: ubuntu-20.04
    uses: egor-tensin/setup-clang@v1
      with:
        version: 9
        platform: x64
    steps:
      - uses: actions/checkout@v2
      - run: c++ -v
      - run: make CXX_STANDARD=2a CXX=$clangxx
